import pytest
from {{ package_name }}.service.handlers import (
    ExampleService,
    CreateRequest,
    ValidationError,
)


@pytest.fixture
def service():
    """Create a service instance for testing."""
    return ExampleService()


def test_create_success(service):
    """Test successful resource creation."""
    request = CreateRequest(
        name="Test Resource",
        description="A test resource description"
    )
    response = service.create(request)
    assert response.id is not None
    assert response.reference.startswith("REF-")
    assert len(response.reference) > 5


def test_create_invalid_name(service):
    """Test creation with invalid name."""
    request = CreateRequest(
        name="AB",  # Too short
        description="A test resource description"
    )
    with pytest.raises(ValidationError):
        service.create(request)


def test_create_empty_name(service):
    """Test creation with empty name."""
    request = CreateRequest(
        name="",
        description="A test resource description"
    )
    with pytest.raises(ValidationError):
        service.create(request)


def test_create_missing_description(service):
    """Test creation with missing description."""
    request = CreateRequest(
        name="Test Resource",
        description=""
    )
    with pytest.raises(ValidationError):
        service.create(request)
